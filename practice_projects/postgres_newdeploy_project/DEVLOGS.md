# Logs

## 29th-30th Jan 2025

So far, I've created a simple Go server and a minimal Dockerfile. I have built the docker image and ran the container locally. I have spent most of time though learning about Docker, how to run a Postgres database in production, different cloud providers for running my Go backend server, how I can setup proper log aggregation, and other accessory concepts. What I've realised is that as long as I have my app containerised with Docker, migrating to another cloud provider probably won't be too difficult, as long as I don't depend too heavily on cloud services.

My plan currently is to use Railway to spin up the Postgres database for production - if I need to migrate off, there is a standard approach to do so. If I ever do need to migrate off Railway, I would use DigitalOcean, because that is where I will also be hosting my Go backend server. I think this combination works well - while initially the database and server are not close to each other or part of the same provider, this initial setup is free, easy to get started, and the progression from that point onwards is also pretty straightforward. It's also better to not put all your eggs in one basket. Migrating the go backend server is easy, and the database should be too, but only time will tell if I stick with this hosting strategy.

## 31st Jan 2025

I have now at least temporarily confirmed a strong line-up and progression of cloud hosting providers for both my database and go backend server. To begin with, all my hobby projects and side project will begin with a Railway Postgres database because of its ease of use, and how cheap it is ($5 USD per month). The issue with Railway is that it only deploys in one region for the hobby plan (Oregon USA), which means I'll also need to deploy my backend server near there (to reduce latency - more server-db requests are made then client-server requests on average). As such, I will also begin my projects by deploying my backend to a DigitalOcean App Platform instance in the same region. My go backend server will be containerised, and the image will be stored in the DigitalOcean Container Registry. DigitalOcean App Platform is free to begin with, and is ultimately the platform I want to stay on for major projects too in the future. In the event that my app actually gets users and lots of traffic, I can migrate my Railway Postgres database, using `pg_dump`, to the DigitalOcean Managed Database, in the same region, and with the potential to create read-replicas and scale through other advanced means. My backend server can also be deployed in multiple instances with a reverse-proxy or load balancer on the front to handle more users and traffic. Achieving scale is a bridge to cross in the future though, I have a general plan as detailed here, but the focus is to establish a process and set of tools that allow me to try out a bunch of ideas at a low cost and with minimal setup where possible.

For development purposes, I will simply use a docker compose strategy to run a persistent Postgres DB volume with my local server running alongside.

## 1st Feb 2025

I setup docker-compose locally and have successfully got a postgres database instance running in a persistent volume alongside my go backend code. I have an endpoint which I can hit to generate new random data as a test for the database connection - everything is working as intended in the development setup.

While trying to host my app on DigitalOcean using the App Platform, I discovered that deploying from a container (using the DO Container Registry) requires a payment - when I said before that it was free, I didn't realise that was only for non-container deployments. This means that to begin with, I will need to use Railway to deploy both my database and my go backend, which works just fine and actually reduces latency further between the database and backend. Railway is quite cheap too, and a flatfee can cover all my hobby projects, and the beginning stages of commercial apps I am trying to develop. The process to deploy to Railway is simple for the database, very simple in fact. For the go backend, I believe the best approach is to do so with Github actions where after pushing to main and running the CI/CD pipeline, Railway will deploy the new changes. This requires turning off automatic deployments and [setting up CI wait in Railway](https://docs.railway.com/guides/github-autodeploys).
